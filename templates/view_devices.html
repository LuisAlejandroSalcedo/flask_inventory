{% extends 'base.html' %}
{% from '_macro.html' import render_pagination %}
{% block title %}Ver Dispositivos{% endblock %}
{% block header %}
<h2>Dispositivos</h2>
{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
		<div class="col-md-3"></div>
		<div class="col-md-6">
			{% if devs %}
				<table class="table table-hover table-condensed">
					<thead>
						<th>Nombre</th>
						<th>Serial Number</th>
						<th>Location</th>
						<th>Description</th>
						<th>Editar</th>
						<th>Borrar</th>
					</thead>
					<tbody>
						{% for dev in devs.items %}
							<tr>
								<td>{{ dev.name }}</td>
								<td>{{ dev.serial_number }}</td>
								<td>{{ dev.location_name}}</td>
								<td>{{ dev.description }}</td>
								<td>
								<a href="{{ url_for("new_device", id=dev.id) }}">
										<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
									</a>
								</td>
								<td>
								<a href="{{ url_for("del_device", id=dev.id) }}">
										<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
									</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			{% endif %}
		</div>
		<div class="col-md-3">
			<label>Cantidad por pagina</label>
			<select id="cant">
				<option value="1" {% if per_page == 2 %}selected="selected"{% endif %}>2</option>
				<option value="2" {% if per_page == 10 %}selected="selected"{% endif %}>10</option>
				<option value="3" {% if per_page == 50 %}selected="selected"{% endif %}>50</option>
			</select>
		</div>
	</div>
	<div class="row" id="row_absolute">
		<div class="col-md-3"></div>
		<div class="col-md-6 text-center">
			
			{% if devs %}
				{{ render_pagination('view_devices',pages,activo,per_page) }}
			{% endif %}
			
		</div>
		<div class="col-md-3"></div>
	</div>
</div>
{% endblock %}
{% block script %}
<script>
	$('#cant').change( function() 
	{
	var selectedValue = parseInt(jQuery(this).val());
	if(selectedValue == "1"){
	location.href="{{ url_for("view_devices", page=1, per_page=2) }}";
	}
	if(selectedValue == "2"){
	location.href="{{ url_for("view_devices", page=1, per_page=10) }}";
	}
	if(selectedValue == "3"){
	location.href="{{ url_for("view_devices", page=1, per_page=50) }}";
	}
	});
</script>
{% endblock %}